(self.webpackChunkclient=self.webpackChunkclient||[]).push([[341],{7341:(e,t,n)=>{"use strict";n.r(t),n.d(t,{MembersModule:()=>S});var s=n(8583),r=n(1823),a=n(3018),i=n(6916),o=n(665),g=n(9756),c=n(6967),m=n(2214);function u(e,t){if(1&e&&(a.TgZ(0,"option",20),a._uU(1),a.qZA()),2&e){const e=t.$implicit;a.Q6J("value",e.value),a.xp6(1),a.hij(" ",e.display," ")}}function l(e,t){if(1&e&&(a.TgZ(0,"div",21),a._UZ(1,"app-member-card",22),a.qZA()),2&e){const e=t.$implicit;a.xp6(1),a.Q6J("member",e)}}function d(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"div",23),a.TgZ(1,"pagination",24),a.NdJ("ngModelChange",function(t){return a.CHM(e),a.oxw().pagination.currentPage=t})("pageChanged",function(t){return a.CHM(e),a.oxw().pageChanged(t)}),a.qZA(),a.qZA()}if(2&e){const e=a.oxw();a.xp6(1),a.Q6J("boundaryLinks",!0)("totalItems",e.pagination.totalItems)("itemsPerPage",e.pagination.itemsPerPage)("ngModel",e.pagination.currentPage)}}let p=(()=>{class e{constructor(e){this.memberService=e,this.genderList=[{value:"male",display:"Males"},{value:"female",display:"Females"}],this.userParams=this.memberService.UserParams}ngOnInit(){this.loadMembers()}loadMembers(){this.memberService.UserParams=this.userParams,this.memberService.getMembers(this.userParams).subscribe(e=>{this.members=e.result,this.pagination=e.pagination})}resetFilters(){this.userParams=this.memberService.resetUserParams(),this.loadMembers()}pageChanged(e){this.userParams.pageNumber=e.page,this.memberService.UserParams=this.userParams,this.loadMembers()}}return e.\u0275fac=function(t){return new(t||e)(a.Y36(i.Z))},e.\u0275cmp=a.Xpm({type:e,selectors:[["app-member-list"]],decls:32,vars:9,consts:[[1,"text-center","mt-3"],[1,"container","mt-3"],["autocomplete","off",1,"form-inline","mb-3",3,"ngSubmit"],["form","ngForm"],[1,"form-group"],["for",""],["type","number","name","minAge",1,"form-control","ml-1",2,"width","70px",3,"ngModel","ngModelChange"],[1,"form-group","px-2"],["type","number","name","maxAge",1,"form-control","ml-1",2,"width","70px",3,"ngModel","ngModelChange"],["name","gender",1,"form-control","ml-1",2,"width","130px",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["type","submit",1,"btn","btn-primary","ml-1"],["type","button",1,"btn","btn-info","ml-1",3,"click"],[1,"col"],[1,"btn-group","float-right"],["type","button","name","orderBy","btnRadio","lastActive",1,"btn","btn-primary",3,"ngModel","click","ngModelChange"],["type","button","name","orderBy","btnRadio","created",1,"btn","btn-primary",3,"ngModel","click","ngModelChange"],[1,"row"],["class","col-2",4,"ngFor","ngForOf"],["class","d-flex justify-content-center",4,"ngIf"],[3,"value"],[1,"col-2"],[3,"member"],[1,"d-flex","justify-content-center"],["previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb",3,"boundaryLinks","totalItems","itemsPerPage","ngModel","ngModelChange","pageChanged"]],template:function(e,t){1&e&&(a.TgZ(0,"div",0),a.TgZ(1,"h2"),a._uU(2),a.qZA(),a.qZA(),a.TgZ(3,"div",1),a.TgZ(4,"form",2,3),a.NdJ("ngSubmit",function(){return t.loadMembers()}),a.TgZ(6,"div",4),a.TgZ(7,"label",5),a._uU(8,"Age from:"),a.qZA(),a.TgZ(9,"input",6),a.NdJ("ngModelChange",function(e){return t.userParams.minAge=e}),a.qZA(),a.qZA(),a.TgZ(10,"div",7),a.TgZ(11,"label",5),a._uU(12,"Age to:"),a.qZA(),a.TgZ(13,"input",8),a.NdJ("ngModelChange",function(e){return t.userParams.maxAge=e}),a.qZA(),a.qZA(),a.TgZ(14,"div",7),a.TgZ(15,"label"),a._uU(16,"Show: "),a.qZA(),a.TgZ(17,"select",9),a.NdJ("ngModelChange",function(e){return t.userParams.gender=e}),a.YNc(18,u,2,2,"option",10),a.qZA(),a.qZA(),a.TgZ(19,"button",11),a._uU(20,"Apply Filters "),a.qZA(),a.TgZ(21,"button",12),a.NdJ("click",function(){return t.resetFilters()}),a._uU(22,"Reset Filters "),a.qZA(),a.TgZ(23,"div",13),a.TgZ(24,"div",14),a.TgZ(25,"button",15),a.NdJ("click",function(){return t.loadMembers()})("ngModelChange",function(e){return t.userParams.orderBy=e}),a._uU(26,"Last Active"),a.qZA(),a.TgZ(27,"button",16),a.NdJ("click",function(){return t.loadMembers()})("ngModelChange",function(e){return t.userParams.orderBy=e}),a._uU(28,"Newest Members"),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(29,"div",17),a.YNc(30,l,2,1,"div",18),a.YNc(31,d,2,4,"div",19),a.qZA()),2&e&&(a.xp6(2),a.hij("Your matches - ",null==t.pagination?null:t.pagination.totalItems," found"),a.xp6(7),a.Q6J("ngModel",t.userParams.minAge),a.xp6(4),a.Q6J("ngModel",t.userParams.maxAge),a.xp6(4),a.Q6J("ngModel",t.userParams.gender),a.xp6(1),a.Q6J("ngForOf",t.genderList),a.xp6(7),a.Q6J("ngModel",t.userParams.orderBy),a.xp6(2),a.Q6J("ngModel",t.userParams.orderBy),a.xp6(3),a.Q6J("ngForOf",t.members),a.xp6(1),a.Q6J("ngIf",t.pagination))},directives:[o._Y,o.JL,o.F,o.wV,o.Fj,o.JJ,o.On,o.EJ,s.sg,g.lz,s.O5,o.YN,o.Kr,c.a,m.Qt],styles:[""]}),e})();var b=n(7191),Z=n(5257),h=n(2684),f=n(8120),A=n(7193),T=n(5690),v=n(9274);function q(e,t){1&e&&(a.TgZ(0,"span",22),a._uU(1," (unread) "),a.qZA())}function x(e,t){if(1&e&&(a.TgZ(0,"span",23),a._uU(1),a.ALo(2,"timeago"),a.qZA()),2&e){const e=a.oxw().$implicit;a.xp6(1),a.hij(" (read ",a.lcZ(2,1,e.dateRead),") ")}}function M(e,t){if(1&e&&(a.TgZ(0,"li"),a.TgZ(1,"div"),a.TgZ(2,"span",14),a._UZ(3,"img",15),a.qZA(),a.TgZ(4,"div",16),a.TgZ(5,"div",17),a.TgZ(6,"small",18),a.TgZ(7,"span",19),a._uU(8),a.ALo(9,"timeago"),a.qZA(),a.YNc(10,q,2,0,"span",20),a.YNc(11,x,3,3,"span",21),a.qZA(),a.qZA(),a.TgZ(12,"p"),a._uU(13),a.qZA(),a.qZA(),a.qZA(),a.qZA()),2&e){const e=t.$implicit,n=a.oxw(2);a.xp6(3),a.Q6J("src",e.senderPhotoUrl||"./assets/user.png",a.LSH)("alt",e.senderUsername),a.xp6(5),a.hij(" ",a.lcZ(9,6,e.messageSent)," "),a.xp6(2),a.Q6J("ngIf",!e.dateRead&&e.senderUsername!==n.username),a.xp6(1),a.Q6J("ngIf",e.dateRead&&e.senderUsername!==n.username),a.xp6(2),a.Oqu(e.content)}}function y(e,t){if(1&e&&(a.ynx(0),a.TgZ(1,"ul",11,12),a.YNc(3,M,14,8,"li",13),a.ALo(4,"async"),a.qZA(),a.BQk()),2&e){const e=a.MAs(2),t=a.oxw();a.xp6(1),a.Q6J("scrollTop",e.scrollHeight),a.xp6(2),a.Q6J("ngForOf",a.lcZ(4,2,t.messageService.messageThread$))}}function U(e,t){1&e&&a._uU(0," No Messages Yet... say hi by using the message box below ")}let _=(()=>{class e{constructor(e){this.messageService=e}ngOnInit(){}sendMessage(e){this.messageService.sendMessage(this.username,this.messageContent).then(()=>{e.reset()})}}return e.\u0275fac=function(t){return new(t||e)(a.Y36(h.e))},e.\u0275cmp=a.Xpm({type:e,selectors:[["app-member-messages"]],inputs:{username:"username",messages:"messages"},decls:14,vars:6,consts:[[1,"card"],[1,"card-body"],[4,"ngIf","ngIfElse"],["noMessages",""],[1,"card-footer"],["autocomplete","off",3,"ngSubmit"],["messageForm","ngForm"],[1,"input-group"],["name","messageContent","required","","type","text","placeholder","Send a private message",1,"form-control","input-sm",3,"ngModel","ngModelChange"],[1,"input-group-append"],["type","submit",1,"btn","btn-primary",3,"disabled"],["comment","this is the main part of the chat",1,"chat",2,"overflow-y","scroll","height","500px",3,"scrollTop"],["scrollMe",""],[4,"ngFor","ngForOf"],[1,"chat-img","float-right"],[1,"rounded-circle",3,"src","alt"],[1,"chat-body"],[1,"header"],[1,"text-muted"],[1,"fa","fa-clock-o"],["class","text-danger",4,"ngIf"],["class","text-success",4,"ngIf"],[1,"text-danger"],[1,"text-success"]],template:function(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"div",0),a.TgZ(1,"div",1),a.YNc(2,y,5,4,"ng-container",2),a.ALo(3,"async"),a.YNc(4,U,1,0,"ng-template",null,3,a.W1O),a.qZA(),a.TgZ(6,"div",4),a.TgZ(7,"form",5,6),a.NdJ("ngSubmit",function(){a.CHM(e);const n=a.MAs(8);return t.sendMessage(n)}),a.TgZ(9,"div",7),a.TgZ(10,"input",8),a.NdJ("ngModelChange",function(e){return t.messageContent=e}),a.qZA(),a.TgZ(11,"div",9),a.TgZ(12,"button",10),a._uU(13,"Send"),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA()}if(2&e){const e=a.MAs(5),n=a.MAs(8);let s;a.xp6(2),a.Q6J("ngIf",null==(s=a.lcZ(3,4,t.messageService.messageThread$))?null:s.length)("ngIfElse",e),a.xp6(8),a.Q6J("ngModel",t.messageContent),a.xp6(2),a.Q6J("disabled",!n.valid)}},directives:[s.O5,o._Y,o.JL,o.F,o.Fj,o.Q7,o.JJ,o.On,s.sg],pipes:[s.Ov,v.wr],styles:[".card[_ngcontent-%COMP%]{border:none}.chat[_ngcontent-%COMP%]{list-style:none;margin:0;padding:0}.chat[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:10px;padding-bottom:10px;border-bottom:1px dotted #b3a9a9}.rounded-circle[_ngcontent-%COMP%]{max-height:50px}"],changeDetection:0}),e})();const J=["memberTabs"];function C(e,t){1&e&&(a.TgZ(0,"div",19),a._UZ(1,"i",20),a._uU(2," Online now "),a.qZA())}let P=(()=>{class e{constructor(e,t,n,s,r){this.route=e,this.messageService=t,this.presence=n,this.accountService=s,this.router=r,this.messages=[],this.accountService.currentUser$.pipe((0,Z.q)(1)).subscribe(e=>this.user=e),this.router.routeReuseStrategy.shouldReuseRoute=()=>!1}ngOnInit(){this.route.data.subscribe(e=>{this.member=e.member}),this.route.queryParams.subscribe(e=>{this.selectTab(e.tab?e.tab:0)}),this.galleryOptions=[{width:"500px",height:"500px",imagePercent:100,thumbnailsColumns:4,imageAnimation:b.zw.Slide,preview:!1}],this.galleryImages=this.getImages()}getImages(){const e=[];for(const t of this.member.photos)e.push({small:null==t?void 0:t.url,medium:null==t?void 0:t.url,big:null==t?void 0:t.url});return e}selectTab(e){this.memberTabs.tabs[e].active=!0}onTabActivated(e){this.activeTab=e,"Messages"===this.activeTab.heading&&0===this.messages.length?this.messageService.createHubConnection(this.user,this.member.username):this.messageService.stopHubConnection()}ngOnDestroy(){this.messageService.stopHubConnection()}loadMessages(){this.messageService.getMessageThread(this.member.username).subscribe(e=>{this.messages=e})}}return e.\u0275fac=function(t){return new(t||e)(a.Y36(r.gz),a.Y36(h.e),a.Y36(f.Q),a.Y36(A.B),a.Y36(r.F0))},e.\u0275cmp=a.Xpm({type:e,selectors:[["app-member-detail"]],viewQuery:function(e,t){if(1&e&&a.Gf(J,7),2&e){let e;a.iGM(e=a.CRH())&&(t.memberTabs=e.first)}},decls:56,vars:22,consts:[[1,"row"],[1,"col-4"],[1,"card"],[1,"card-img-top","img-thumbnail",3,"src","alt"],[1,"card-body"],["class","mb-2",4,"ngIf"],[1,"card-footer"],[1,"btn-group","d-flex"],[1,"btn","btn-primary"],[1,"btn","btn-success",3,"click"],[1,"col-8"],[1,"member-tabset"],["memberTabs",""],[3,"heading","selectTab"],["heading","Interests",3,"selectTab"],["heading","Photos",3,"selectTab"],[1,"ngx-gallery",3,"options","images"],["heading","Messages",3,"selectTab"],[3,"username"],[1,"mb-2"],[1,"fa","fa-user-circle","text-success"]],template:function(e,t){if(1&e&&(a.TgZ(0,"div",0),a.TgZ(1,"div",1),a.TgZ(2,"div",2),a._UZ(3,"img",3),a.TgZ(4,"div",4),a.YNc(5,C,3,0,"div",5),a.ALo(6,"async"),a.TgZ(7,"div"),a.TgZ(8,"strong"),a._uU(9,"Location:"),a.qZA(),a.TgZ(10,"p"),a._uU(11),a.qZA(),a.qZA(),a.TgZ(12,"div"),a.TgZ(13,"strong"),a._uU(14,"Age:"),a.qZA(),a.TgZ(15,"p"),a._uU(16),a.qZA(),a.qZA(),a.TgZ(17,"div"),a.TgZ(18,"strong"),a._uU(19,"Last Active:"),a.qZA(),a.TgZ(20,"p"),a._uU(21),a.ALo(22,"timeago"),a.qZA(),a.qZA(),a.TgZ(23,"div"),a.TgZ(24,"strong"),a._uU(25,"Member since:"),a.qZA(),a.TgZ(26,"p"),a._uU(27),a.ALo(28,"date"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(29,"div",6),a.TgZ(30,"div",7),a.TgZ(31,"button",8),a._uU(32,"Like"),a.qZA(),a.TgZ(33,"button",9),a.NdJ("click",function(){return t.selectTab(3)}),a._uU(34,"Message"),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(35,"div",10),a.TgZ(36,"tabset",11,12),a.TgZ(38,"tab",13),a.NdJ("selectTab",function(e){return t.onTabActivated(e)}),a.TgZ(39,"h4"),a._uU(40,"Description"),a.qZA(),a.TgZ(41,"p"),a._uU(42),a.qZA(),a.TgZ(43,"h4"),a._uU(44,"Looking for"),a.qZA(),a.TgZ(45,"p"),a._uU(46),a.qZA(),a.qZA(),a.TgZ(47,"tab",14),a.NdJ("selectTab",function(e){return t.onTabActivated(e)}),a.TgZ(48,"h4"),a._uU(49,"Interests"),a.qZA(),a.TgZ(50,"p"),a._uU(51),a.qZA(),a.qZA(),a.TgZ(52,"tab",15),a.NdJ("selectTab",function(e){return t.onTabActivated(e)}),a._UZ(53,"ngx-gallery",16),a.qZA(),a.TgZ(54,"tab",17),a.NdJ("selectTab",function(e){return t.onTabActivated(e)}),a._UZ(55,"app-member-messages",18),a.qZA(),a.qZA(),a.qZA(),a.qZA()),2&e){let e;a.xp6(3),a.s9C("src",t.member.photoUrl||"./assets/user.png",a.LSH),a.s9C("alt",t.member.knownAs),a.xp6(2),a.Q6J("ngIf",null==(e=a.lcZ(6,15,t.presence.onlineUsers$))?null:e.includes(t.member.username)),a.xp6(6),a.AsE("",t.member.city,", ",t.member.country,""),a.xp6(5),a.Oqu(t.member.age),a.xp6(5),a.Oqu(a.lcZ(22,17,t.member.lastActive)),a.xp6(6),a.Oqu(a.xi3(28,19,t.member.created,"longDate")),a.xp6(11),a.MGl("heading","About ",t.member.knownAs,""),a.xp6(4),a.Oqu(t.member.introduction),a.xp6(4),a.Oqu(t.member.lookingFor),a.xp6(5),a.Oqu(t.member.interests),a.xp6(2),a.Q6J("options",t.galleryOptions)("images",t.galleryImages),a.xp6(2),a.Q6J("username",t.member.username)}},directives:[s.O5,T.AH,T.wW,b.g$,_],pipes:[s.Ov,v.wr,s.uU],styles:[".img-thumbnail[_ngcontent-%COMP%]{margin:25px;width:85%;height:85%}.card-body[_ngcontent-%COMP%]{padding:0 25px}.card-footer[_ngcontent-%COMP%]{padding:10px 15px;background-color:#fff;border-top:none}.ngx-gallery[_ngcontent-%COMP%]{display:inline-block;margin-bottom:20px}"]}),e})();var O=n(5601);const w=[{path:"",component:p,pathMatch:"full"},{path:":username",component:P,resolve:{member:(()=>{class e{constructor(e){this.membersService=e}resolve(e){return this.membersService.getMember(e.paramMap.get("username"))}}return e.\u0275fac=function(t){return new(t||e)(a.LFG(i.Z))},e.\u0275prov=a.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()}}];let S=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=a.oAB({type:e}),e.\u0275inj=a.cJS({imports:[[O.m,s.ez,r.Bz.forChild(w)],r.Bz]}),e})()}}]);